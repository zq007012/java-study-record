``

# 第06章 Linux系统概述和编程基础

[toc]

## 一. LInux系统概述(常识)

### 1.1 计算机的体系结构

- 计算机有计算机硬件和计算机软件两个部分组成, 其中计算机软件(Computer Software) 可分为系统软件和应用软件, 系统软件就是操作系统, 是其他软件的基础
- ![](%E7%AC%AC06%E7%AB%A0%20Linux%E7%B3%BB%E7%BB%9F%E6%A6%82%E8%BF%B0%E5%92%8C%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80.assets/%E7%AC%AC%E5%85%AD%E7%AB%A0%20Linux%E7%B3%BB%E7%BB%9F%E6%A6%82%E8%BF%B0%E5%92%8C%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80.png)
- 目前主流的操作系统有: Windows系列、Linux系列、Android系列、IOS系列...

### 1.2 Linux系统概述

- Linux系统诞生于1991年, 在林纳森·托瓦兹(Linus·Torvalds)上大学期间因不满意教学中使用的MINIX操作系统并处于个人爱好设计和研发的。
- Linus系统是一套免费、自由、开源的类Unix操作系统，是一个基于Posix(Portable Operating System Interface)标准和多用户、多任务、支持多线程的操作系统。
- Linux能运行主要的Unix工具软件、应用程序和网络协议， 支持32位和64为硬件

### 1.3 主要发行版本

![](%E7%AC%AC06%E7%AB%A0%20Linux%E7%B3%BB%E7%BB%9F%E6%A6%82%E8%BF%B0%E5%92%8C%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80.assets/Linux%E4%B8%BB%E8%A6%81%E5%8F%91%E8%A1%8C%E7%89%88%E6%9C%AC.png)

- Redhat: 目前最大的Linux发行商， 功能全面并且稳定，于2018年10月被IBM以340亿美元的价格收购
- Ubuntu：母犬最好的Linux桌面版， 拥有很人性化的靓丽的交互界面，强大的软件源支持。
- CentOS：是RHEL的克隆版本， 可以认为是免费版本的Redhat系统.

## 二. CentOS系统安装(掌握)

### 2.1 Vmware软件的下载和安装

- 官网地址:<https://my.vmware.com/web/vmware/downloads/#all_products>, 网页搜索: VMware Workstation Pro

- 16.x版本激活密钥: ZF3R0-FHED2-M80TY-8QYGC-NPKYF
- 安装好软件后, 参考同目录下的文件夹---**第06章 VMware WorkStation的配置**下的指示进行配置

### 2.2 CentOS系统的下载

- 官网地址: <https://www.centos.org/download/>

### 2.3 在VMware WorkStation上安装CentOS的虚拟机

- 打开**VMware WorkStation**, 在侧边栏空白处点击右键, 点击**新建虚拟机(N)...**, 参考同目录下的文件夹**第06章 新建虚拟机的向导配置**的值是进行配置, 耐心等待..., 因为安装系统需要很长一段时间
- 安装好后可以在虚拟机的选项卡上点击右键, 点击`快照(N)`→`拍摄快照(T)...`来备份系统的当前状态, 如果以后吧系统搞崩了, 还可以恢复当前状态
- `Setting`→`Power`→`Power Saving`→`Blank Screen`可以设置为`never`, 这样虚拟机就不会自动锁屏了
- CentOS系统创建的第一个账户的密码同时也是root账户的密码, 账户的密码最好不要少于8位

## 三. 目录结构

### 3.1 框架结构

![](%E7%AC%AC06%E7%AB%A0%20Linux%E7%B3%BB%E7%BB%9F%E6%A6%82%E8%BF%B0%E5%92%8C%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80.assets/Linux%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84.png)

### 3.2 目录详解

| 目录名称 | 功能介绍                                                     |
| -------- | ------------------------------------------------------------ |
| /bin     | binary; 存放二进制可执行文件(例如tomcat的bin目录)            |
| /sbin    | super binary; 存放二进制文件, 该目录下的文件只有root用户有权访问 |
| /boot    | 系统启动核心目录, 存放系统启动程序文件, 例如: 查看启动文件的大小 |
| /dev     | device; 存放硬件设备相关的文件                               |
| /etc     | etcetra; 存放系统配置文件(字体文件等)                        |
| /home    | 用户目录(主目录) ; 每一个用户在该目录下都有一个单独的目录(不包括root用户), 用于存放独属于该用户的文件 |
| /lib     | library; 系统资源类库                                        |
| /proc    | 内存映射目录, 可以查看系统相关硬件的信息                     |
| /var     | variable; 可变的, 变量, 部署项目用的                         |
| /tmp     | temporary; 用来存放临时文件                                  |
| /root    | 超级用户root的根目录                                         |
| /usr     | unix shared resources; 存放unix共享系统资源, 类似于`c:/Program Files`, 用于安装各种软件 |
| /mnt     | mount; 可直接理解为“挂载”挂接光驱、USB设备的目录，加载后，会在mnt里多出相应设备的目录。 |

## 四. 常用命令(重点)

### 4.1 Shell的概念

- Shell俗称外壳, 是提供用户使用界面的一种软件, 叫做命令解释器
- 主要负责接收用户输入的命令, 然后调用相应的应用程序, 最后向用户输出程序运行的结果

### 4.2 命令的格式

- **命令 [选项] [参数]**
- 命令区分大小写, 其中选项和参数是可选的, 中间采用空格隔开.

### 4.3 常用命令的详解

#### 4.3.1 显示目录下的子文件信息和子目录信息

| 命令                          | 说明                                                         |
| ----------------------------- | ------------------------------------------------------------ |
| ls                            | 全称: `list`    列出当前所在目录下的所有文件夹和文件的**名字**, 示例代码: `ls` |
| `ls -l`或者`ll`               | 全称: `list -list`    列出当前所在目录下的所有文件夹和文件的详细信息, 示例代码: `ls -l`或者`ll` |
| ls -a                         | 全称: `list -all`    列出当前所在目录下的==所有文件夹和文件的名字==以及==隐藏的文件夹和文件的名字==, 示例代码: `ls -a` |
| ls -al                        | 全称`lsit -all -list`    列出当前所在目录下的所有文件夹和文件的详细信息以及隐藏的文件夹和文件的详细信息, 示例代码: `ls -al` |
| ls 目录名                     | 列出指定目录下的所有文件夹和文件的名字, 示例代码: `ls /home/zq` |
| `ls -l 目录名`或者`ll 目录名` | 列出指定目录下的所有文件夹和文件的详细信息, 示例代码: `ls -l /home/zq` |
| ls -a 目录名                  | 示例代码: `ls -a /home/zq`                                   |
| ls -al 目录名                 | 示例代码: `ls -al /home/zq`                                  |

##### 4.3.1.1 `[zq@localhost /]$`解释说明

- `zq`  表示当前账户的名字, 如果当前账户是root的话就是`[root@lacalhost /]$`
- `localhost`    主机名, 因为现在是在本地操作本机的命令解释器, 所以显示的是localhost, 如果是在远程操作的话, 显示的就是远程主机的名字或者远程主机的ip地址
- `/`    表示当前所在的目录, `/`表示系统的根目录, `~`表示当前账户的根目录(即当前账户的主目录)

##### 4.3.1.2 `ls -l dirPath`显示的信息说明

![](%E7%AC%AC06%E7%AB%A0%20Linux%E7%B3%BB%E7%BB%9F%E6%A6%82%E8%BF%B0%E5%92%8C%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80.assets/One_2021-06-16_221515.png)

- ①     表示文件类型,
  -  `d`表示这是个目录,
  -  `-`表示这是个文件,
  -  `l`表示这是个链接文件, 一般可以链接一个目录或者网址, 双击就可以打开
  - `p`表示可以随机存取的设备, 如 U盘
  - `c`表示一次性读取设备, 如 鼠标, 键盘等
- ②    表示属主[^注1]的[权限](#4.3.12.1 权限说明)
- ③    表示属组[^注1]的[权限](#4.3.12.1 权限说明)
- ④    表示非所有者所在群组的用户对该目录所具有的[权限](#4.3.12.1 权限说明)
- ⑤    表示链接数，表示有多少个文件链接到inode号码
- ⑥    表示该目录的所有者(==属主==)
- ⑦    表示该目录的所有者所在的群组(==属组==)
- ⑧    表示该目录的大小, 单位为byte
- ⑨    表示目录的最后**修改**时间
- ⑩    表示目录的名称

[^注1]: 一个组可以包含多个用户。对于文件或目录的权限归属分为属主，属组。属主就是单个用户的权限，属组就这一组用户的权限, 如果文件或目录的属组不是root组, 那么root组里的用户对该文件或目录的权限都是`rwx`

#### 4.3.2 目录切换

| 命令         | 功能                    | 示例代码             |
| ------------ | ----------------------- | -------------------- |
| cd ..        | 切换到上级目录          | `cd ..`              |
| cd dirpath   | 切换到dirpath表示的目录 | `cd /home/zq`        |
| `cd`或`cd ~` | 切换到当前账户的根目录  | `cd`<br />或者`cd ~` |
| cd /         | 切换到系统的根目录      | `cd /`               |

##### 4.3.2.1 可以表示目录的特殊字符

| 字符  | 说明                 |
| ----- | -------------------- |
| `/`   | 表示根目录           |
| `./`  | 表示当前目录         |
| `../` | 表示当前目录的父目录 |
| `~`   | 表示当前用户的根目录 |

##### 4.3.2.2 表示目录的特殊字符的使用

- `home`    当前目录下的home文件夹
- `./home`    也表示当前目录下的home文件夹
- `../home`    当前目录的父目录下的home文件夹
- `/home`    根目录下的home文件夹
- `~/Downloads`    当前账户的根目录下的Downloads文件夹

#### 4.3.3 查看当前目录的完整路径

| 命令 | 功能                                                  |
| ---- | ----------------------------------------------------- |
| pwd  | 全称: print working directory, 查看当前目录的完整路径 |

#### 4.3.4 查看当前用户的名字

| 命令   | 功能               |
| ------ | ------------------ |
| whoami | 查看当前用户的名字 |

#### 4.3.5 用户切换

- `root`用户的初始密码跟安装系统时创建的第一个用户的密码相同

| 命令      | 功能描述                       |
| --------- | ------------------------------ |
| su        | 从当前用户切换到root用户       |
| su root   | 从当前用户切换到root用户       |
| su 用户名 | 切换到指定的用户               |
| exit      | 退出当前用户, 退回到原来的用户 |

==最好使用`su`和`exit`搭配使用, 否则多次使用`su`指令会导致用户的"叠加"==

#### 4.3.6 用户管理

| 命令           | 功能                                                         |
| -------------- | ------------------------------------------------------------ |
| useradd 用户名 | 创建指定用户名的新用户,  创建成功后必须先设置一个密码, **该命令只能在root用户下使用** |
| passwd 用户名  | 为指定用户名的用户设置密码, 不需要知道用户的原密码, **该命令只能在root用户下使用** |
| passwd         | 修改当前用户的密码, 需要知道当前用户的原密码                 |
| userdel 用户名 | 删除指定用户,**该命令只能在root用户下使用**                  |

#### 4.3.7 查看命令所在的目录

| 命令       | 功能                   |
| ---------- | ---------------------- |
| which 命令 | 查看命令所在的路径信息 |

#### 4.3.8 文件操作

| 命令                         | 功能                                                         |
| ---------------------------- | ------------------------------------------------------------ |
| touch fileName               | 创建名为fileName的文件                                       |
| touch dirpath/fileName       | 在路径dirPath目录下创建名为fileName文件                      |
| echo "内容"                  | 把双引号里的内容打印到终端, 内容里的`\`就只是其本意, 没有转义字符的意思 |
| echo **-e** "内容"           | 把双引号里的内容打印到终端, 内容里的`\`是转义字符的意思      |
| echo "内容">fileName         | 把双引号里的内容覆盖写到文件中, **若文件不存在则创建**, 内容里的`\`就只是其本意, 没有转义字符的意思 |
| echo "内容">>fileName        | 把双引号里的内容追加到文件的下一行, **若文件不存在则创建**, 内容里的`\`就只是其本意, 没有转义字符的意思 |
| echo **-e** "内容">fileName  | 把双引号里的内容覆盖写到文件中, **若文件不存在则创建**, 内容里的`\`是转义字符的意思 |
| echo **-e **"内容">>fileName | 把双引号里的内容追加到文件的下一行, **若文件不存在则创建**, 内容里的`\`是转义字符的意思 |
| cat fileName                 | 打印文件fileName里的内容到终端                               |
| more fileName                | 分屏查看文件内容, 不支持回看; <br />fileName文件里的内容过多, 不方便在终端上一次性显示出来, 用此方法可以使这些内容一部分(41%)一部分(44%)地显示, <br />点击按键`Enter`(显示的少)或点击按键`Space`(显示的多)会显示下一部分<br />点击按键`Q`可以退出本显示状态. <br />不支持回看是指, 无法从显示80%的状态回到显示60%的状态 |
| less fileName                | 分页查看fileName文件里的内容, 支持回看; <br />终端的整个显示区域就是一页, fileName文件中的内容会一页一页地显示在终端上<br />鼠标滚轮上滚或点击按键`⬆`显示上一页, 鼠标滚轮下滚或点击按键`⬇`显示下一页<br />点击按键`Q`可以推出本显示状态<br />支持回看是指, 可以i显示上一页 |
| head -num fileName           | 查看文件的前num行内容                                        |
| tail -num fileName           | tail是尾巴的意思, 查看文件的最后num行内容                    |
| wc fileName                  | 查看文件的行数. `40   80 2047 /etc/passwd` : (行数  列数  字符数  文件path) |

> - Linux中的换行只需要一个换行符LF(Line Feed), 即`\n`
> - Window中的换行需要回车符CR(Carrige Return)和换行符LF(Line Feed), 即`\r\n`
> - Mac中的换行需要一个回车符CR(Carrige Return), 即`\r`

#### 4.3.9 针对终端的一些指令

| 命令  | 功能                                                         |
| ----- | ------------------------------------------------------------ |
| exit  | 退出当前账户, 返回上一个账户, 如果没有上一个账户, 那就关闭终端 |
| clear | 清屏, 把之前的所有内容都放到上一页, 向上滚动鼠标还可以看到这些内容 |
| reset | 清屏, 清除之前所有的内容, 这些内容就再也看不到了             |

#### 4.3.10 目录操作

| 命令                   | 功能描述                                                     |
| ---------------------- | ------------------------------------------------------------ |
| mkdir dirName          | 在当前目录下创建名为dirName的文件夹, 若已存在该文件夹, 则创建失败 |
| mkdir -p dirPath       | 按照dirPath创建文件夹, 若有不存在的父目录, 则一并创建        |
| mv path1 path2         | **剪切**, 将path1表示的文件或文件夹移动到目录path2下, **path2表示的目录必须存在**, 否则就变成了**重命名** |
| `mv path ./`           | **剪切**, 将path表示的文件或文件夹移动到当前文件夹下         |
| mv path1 path2/name    | **重命名**, 将path1表示的文件或文件夹移动到目录path2下,并将之重命名为name,  **name必须不存在**, 否则就变成了剪切 |
| cp path1 path2/name    | 复制path1表示的文件或文件夹到目录path2下, 并将之命名为name, **注意path1表示文件夹时里面不能有子文件或子文件夹, 否则会复制失败, path2如果不存在的话会自动创建** |
| cp -r path1 path2/name | 复制path1表示的文件或文件夹到目录path2下, 并将之命名为name, **注意path1表示文件夹时里面可以有子文件或子文件夹, ath2如果不存在的话会自动创建** |
| rm filePath            | 删除filePath表示的文件                                       |
| rm -r path             | 删除path表示的文件或文件夹(以及其下的子文件或子文件夹)       |
| rm -rf path            | 强制删除path表示的文件或文件夹(以及其下的子文件或子文件夹)   |

#### 4.3.11 查找目录或文件的绝对路径

| 命令                       | 功能                                                         |
| -------------------------- | ------------------------------------------------------------ |
| find dirPath -name "demo"  | 在dirPath所表示的目录下, 查找**所有名为**`demo`的后辈文件和后辈文件夹, 并打印出这些文件和文件夹的绝对路径 |
| find dirPath -name "demo*" | 在dirPath所表示的目录下, 查找**所有名字中以`demo`开头**的后辈文件和后辈文件夹, 并打印出这些文件和文件夹的绝对路径 |
| find dirPath -type f       | 在dirPath所表示的目录下, 找出所有的**后辈==文件==(包括隐藏的)**, 并打印出这些文件的绝对路径 |

#### 4.3.12 权限管理

##### 4.3.12.1 `r` `w` `x`权限说明

###### 4.3.12.1.1  `r` `w` `x`权限对文件的作用

| 权限 | 说明                                                         |
| ---- | ------------------------------------------------------------ |
| `r`  | 表示可读取此文件中的实际内容，例如，可以对文件执行 cat、more、less、head、tail 等文件查看命令。<br />**若权限所在位置为`-`, 则表示没有这个权限** |
| `w`  | 表示可以编辑、新增或者修改文件中的内容，例如，可以对文件执行 vim、echo 等修改文件数据的命令。<br />注意，无此权限的用户没有删除本文件的权利，除非用户对该文件的上级目录拥有写权限才可以。<br />**若权限所在位置为`-`, 则表示没有这个权限** |
| `x`  | 表示该文件具有被系统执行的权限。<br />Window系统中查看一个文件是否为可执行文件，是通过扩展名（.exe、.bat 等），但在 Linux 系统中，文件是否能被执行，是通过看此文件是否具有 x 权限来决定的。也就是说，只要文件拥有 x 权限，则此文件就是可执行文件。但是，文件到底能够正确运行，还要看文件中的代码是否正确。<br/>**对于文件来说，执行权限是最高权限**。给用户或群组设定权限时，是否赋予执行权限需要慎重考虑，否则会对系统安装造成严重影响。<br />**若权限所在位置为`-`, 则表示没有这个权限** |

###### 4.3.12.1.2  `r` `w` `x`权限对目录的作用

| 权限 | 说明                                                         |
| ---- | ------------------------------------------------------------ |
| `r`  | 表示具有读取目录结构列表的权限，也就是说，可以看到目录中有哪些文件和子目录。一旦对目录拥有 r 权限，就可以在此目录下执行 ls 命令，查看目录中的内容。<br />**若权限所在位置为`-`, 则表示没有这个权限** |
| `w`  | 对于目录来说，w 权限是最高权限。对目录拥有 w 权限，表示可以对目录做以下操作：1. 在此目录中建立新的文件或子目录；2. 删除已存在的文件和目录（无论子文件或子目录的权限是怎样的）；3. 对已存在的文件或目录做更名操作；4. 移动此目录下的文件和目录的位置。<br/>一旦对目录拥有 w 权限，就可以在目录下执行 touch、rm、cp、mv 等命令。<br />**若权限所在位置为`-`, 则表示没有这个权限** |
| `x`  | 表示用户可以进入目录<br />目录是不能直接运行的，对目录赋予 x 权限，代表用户可以进入目录，也就是说，赋予 x 权限的用户或群组可以使用 cd 命令。<br/>对目录来说，如果只赋予 r 权限，则此目录是无法使用的。很简单，只有 r 权限的目录，用户只能查看目录结构，根本无法进入目录（需要用 x 权限），更不用说使用了。<br />**若权限所在位置为`-`, 则表示没有这个权限** |

###### 4.3.12.1.3 `r` `w` `x`权限的数值

- `r`的数字代号是4,  `w`的数值是2,  `x`的数字代号是1,  `-`的数字代号是0

- 所以, 
  - 权限`rwx`可以用数值7表示, 
  - 权限`rw-`可以用数值6表示, 
  - 权限`r-x`可以用数值5表示, 
  - 权限`r--`可以用数值4表示

##### 4.3.12.3 表示用户类型的字符

- `u`    User，属主, 即文件或目录的拥有者；
- `g`    Group，属组, 即文件或目录的所属群组
- `o`    Other，除了文件或目录拥有者或所属群组之外，其他用户皆属于这个范围；
- `a`    All，即全部的用户，包含拥有者，所属群组以及其他用户

##### 4.3.12.2 更改用户的权限

| 命令               | 说明                                                         |
| ------------------ | ------------------------------------------------------------ |
| chmod 权限 path    | *==ch==ange the permissions ==mod==e of a file*更改指定用户对path表示的文件或文件夹所拥有的权限 |
| chmod -R 权限 path | 递归处理, 改变指定目录下的所有文件及子目录的权限             |

###### 4.3.12.2.1 示例代码

- `chmod u+w,u+r,g+w,g+r demo.txt`    对于demo.txt文件, User添加了`w`和`r`权限, Group添加了`w`和`r`权限
- `chmod u-x,g-w demo.txt`    对于demo.txt文件, User去除了`x`权限, Group去除了了`w`权限
- `chmod u=rwx,g=rw-,o=r-- demo.txt`    对于demo.txt文件, User的权限改成了`rwx`, Group的权限改成了`rw-`, Other的权限改成了`r--`, ==建议以后用这一方式, 因为足够直观==
- `chmod 764 demo.txt`    对于demo.txt文件, User的权限改成了`7`(`rwx`), Group的权限改成了`6`(`rw-`),  Other的权限改成了`4`(`r--`)
- `chmod a+w demo.txt`     对于demo.txt文件, 所有用户都添加了`w`权限
- `chmod a-w demo.txt`     对于demo.txt文件, 所有用户都去除了了`x`权限
- `chmod a=rwx demo.txt`    对于demo.txt文件, 所有用户的权限都改成了`rwx`
- `chmod -R 764 demo`      递归修改目录`demo`下的所有子文件和子文件夹的权限为`764`

##### 4.3.12.3 更改文件或文件夹的属主

| 命令                    |                                                              |
| ----------------------- | ------------------------------------------------------------ |
| chown 用户名 path       | *==ch==ange file ==own==ership*, 改变path所表示的文件或目录的拥有者 |
| chown -R 用户名 dirPath | 递归处理, 改变指定目录下的所有文件及子目录的拥有者           |

###### 4.3.12.3.1 示例代码

- `chown zq demo.txt`
- `chown zq demo`
- `chown -R zq demo`

##### 4.3.12.4更改文件或文件夹的属组

| 命令                  |                                                              |
| --------------------- | ------------------------------------------------------------ |
| chgrp 组名 path       | *==ch==ange file ==gr==ou==p== ownership*, 改变path所表示的文件或目录的所属群组 |
| chgrp -R 组名 dirPath | 递归处理, 改变指定目录下的所有文件及子目录的所属群组         |

###### 4.3.12.4.1

- `chgrp zq demo.txt`
- `chgrp zq demo`
- `chgrp -R zq demo`

#### 4.3.13 进程管理

##### 4.3.13.1 显示进程信息

| 命令                  | 功能                                                         |
| --------------------- | ------------------------------------------------------------ |
| ps -aux               | 列出目前所有的正在内存当中的程序, <br />依次显示的是: `USER`  `PID`  `%CPU`  `%MEM`  `VSZ`  `RSS` `TTY`   `STAT`  `START`  `TIME`  `COMMAND` |
| ps -ef                | 显示所有进程信息，连同命令行<br />依次显示的是: `UID`  `PID`  `PPID`  `C`  `STIME` `TTY`  `TIME`  `CMD`<br />[说明](#4.3.13.1.2 显示结果说明) |
| ps -ef \| grep 进程名 | ps 与grep 常用组合用法，查找特定进程<br />依次显示的是: `UID`  `PID`  `PPID`  `C`  `STIME` `TTY`  `TIME`  `CMD`<br />[说明](#4.3.13.1.2 显示结果说明) |

###### 4.3.13.1.1 `ps -aux`显示结果说明

- USER    该进程属于哪个使用者账号的
- PID       该进程(process)的PID, 杀死进程时会用到
- %CPU    该进程使用掉的cpu资源百分比
- %MEM  该process所占用的物理内存百分比
- VSZ        该process使用掉的虚拟内存量(Kb)
- TSS        该process占用的固定的内存量(Kb)
- TTY        该 process 是在那个终端机上面运作，若与终端机无关，则显示 ?，另外， tty1-tty6 是本机上面的登入者程序，若为 pts/0 等等的，则表示为由网络连接进主机的程序。
- STAT     该process目前的状态, 主要的状态有
  - R    该程序目前正在运作, 或者是可被运作的
  - S    该程序目前正在睡眠当中,(可说是 idle 状态)，但可被某些讯号 (signal) 唤醒。
  - T    该程序目前正在侦测或者是停止了
  - Z    该程序应该已经终止，但是其父程序却无法正常的终止他，造成 zombie (疆尸) 程序的状态
- START    该 process 被触发启动的时间
- TIME      该 process 实际使用 CPU 运作的时间
- COMMAND    该程序的实际指令

###### 4.3.13.1.2 `ps -ef|grep 进程名`显示结果说明

依次显示的是: `UID`  `PID`  `PPID`  `C`  `STIME` `TTY`  `TIME`  `CMD`

- UID        process被该UID所拥有
- PID        process的PID(杀死这个进程时会用到)
- PPID      process上级父程序的PID
- C             该进程使用掉的cpu资源百分比
- STIME     
- TTY          登入者的终端机位置
- TIME        该 process 是在那个终端机上面运作，若与终端机无关，则显示 ?，另外， tty1-tty6 是本机上面的登入者程序，若为 pts/0 等等的，则表示为由网络连接进主机的程序。
- CMD        该程序的实际指令

##### 4.3.13.2 杀死进程

| 命令           | 功能               |
| -------------- | ------------------ |
| kill pidNum    | 杀死指定的进程     |
| kill -9 pidNum | 强制杀死指定的进程 |

#### 4.3.14 压缩解压命令

| 命令                                                         | 说明                                                    |
| ------------------------------------------------------------ | ------------------------------------------------------- |
| **tar -zcvf[^注3] path/压缩文件名.tar.gz path1 path2 ... pathN** | 将path1 path2 ... pathN表示的文件压缩到指定的压缩文件中 |
| **tar -zxvf[^注3] path/压缩文件名.tar.gz**                   | 将压缩文件解压到当前文件夹下                            |
| **tar -zxvf[^注3] path/压缩文件名.tar.gz -C[^注3] dirPath ** | 将压缩文件解压到dirPath表示的文件夹下                   |
| **tar -tf[^注3] path/压缩文件名.tar.gz**                     | 列出压缩文件中的所有文件和文件夹的信息                  |

#####  4.3.14.1 不同类型压缩文件的解压方式

| 压缩文件类型                              | 解压方法                                                     |
| ----------------------------------------- | ------------------------------------------------------------ |
| fileName**.tar**                          | **==tar -zx==vf fileName==.tar==**                           |
| fileName**.tar.gz**<br />fileName**.tgz** | **==tar -zx==vf[^注3] fileName==.tar.gz==**<br />**==tar -zx==vf[^注3] fileName==.tgz==** |
| fileName**.gz**                           | **gzip -d fileName==.gz==<br />gunzip fileName==.gz==**      |
| fileName**.tar.bz2**                      | **==tar -jx==vf fileName==.tar.bz2==**                       |
| fileName**.bz2**                          | **bzip2 -d fileName==.bz2==**<br />**bunzip2 fileName==.bz2==** |
| fileName**.tar.Z**                        | **==tar -Zx==vf fileName==.tar.Z==**                         |
| fileName**.Z**                            | **uncompress fileName==.Z==**                                |
| fileName**.rar**                          | **unrar fileName==.rar==**                                   |
| fileName**.zip**                          | **unzip fileName==.zip==**                                   |

[^注3]: -z : 通过该命令来处理文件;   -c : 进行压缩操作;   -x : 进行解压操作;   -v : 显示指令执行过程;   -f : 指定要解压或者压缩的文件;  -C : 把解压或者压缩下来的文件放到指定的文件夹中;  -t : 列出压缩文件的内容



#### 4.3.15 其他命令

| 命令       | 功能                         |
| ---------- | ---------------------------- |
| ifconfig   | 查看当前系统的ip地址等信息   |
| man 命令名 | 查询指定的命令的说明以及用法 |
| man 函数名 | 查询指定的函数的说明以及用法 |

#### 4.3.16 创建快捷链接

| 命令                      | 功能                                                         |
| ------------------------- | ------------------------------------------------------------ |
| ln -s sourcePath linkPath | 将linkPath设置为sourcePath的快捷链接, 可以通过访问linkPath访问到sourcePath |

```shell
ln -s /usr/apache/tomcat-8.5.68/webapps ~/Desktop/webapps
```

#### 4.3.17 Linux下常用的特殊字符

| 通配符     | 功能                                                         |
| ---------- | ------------------------------------------------------------ |
| `*`        | 通配符, 代表任意多个任意字符                                 |
| `?`        | 通配符, 代表一个任意字符                                     |
| `[ ]`      | 中间为字符组合                                               |
| `#`        | 注释                                                         |
| `\`        | 跳转符号,将特殊字符或通配符还原成一般符号, 转义字符          |
| `/`        | 路径分隔符号                                                 |
| `|`        | 分隔两个管线命令的界定                                       |
| `;`        | 连续性命令的界定                                             |
| `~`        | 当前用户的根目录                                             |
| `$`        | 变量前需要加的变量值                                         |
| `!`        | 逻辑运算中的**非**                                           |
| `>`        | 输出导向, 意为**取代**                                       |
| `>>`       | 输出导向, 以为**追加**                                       |
| `'  '`     | 单引号,不具有变量置换功能                                    |
| `"  "`     | 双引号,具有变量置换功能                                      |
| `'  '`     | quote符号(反引号) ,两个`'  '`中间为**可以先执行的指令**      |
| `( )`      | 中间为子shell的起始与结束                                    |
| `{ }`      | 中间为命令区块组合                                           |
| `Ctrl + C` | 终止当前命令                                                 |
| `Ctrl + D` | 输入结束(EOF)*end of file*, 例如邮件结束的时候               |
| `Ctrl + M` | 效果等同于`Enter`                                            |
| `Ctrl + S` | 暂停屏幕的输出                                               |
| `Ctrl + Q` | 恢复屏幕的输出                                               |
| `Ctrl + U` | 删除光标所在行                                               |
| `Ctrl + Z` | 暂停当前命令<br /> 恢复命令的方法: 输入命令`jobs`显示当前暂停的进程; 输入命令`bg %N`使第N个任务在后台运行或者输入命令`fg %N`使第N个任务在前台运行 |
| `&&`       | 当前一个指令执行成功时,执行后一个指令                        |
| `||`       | 当前一个指令执行失败时,执行后一个指令                        |

==其中最常用的是`＊`    `?`    `［］`和`'  '`==

#### 4.3.18 在文件的内容中查找

| 命令                 | 功能                                                         |
| -------------------- | ------------------------------------------------------------ |
| grep "hero" filePath | 在filePath这个文件内查找`hero`这个字符串, 打印出所有包含"hero"的行的内容 |

#### 4.3.19 算术运算命令

| 命令         | 功能                                                         |
| ------------ | ------------------------------------------------------------ |
| expr 88 + 99 | expr, 全称是`express`(表达式), 只能进行算术运算(+、-、*、/、%), 获取算术运算的值 |



## 五. vim工具的使用

- vi和vim都是Linux系统的多模式编辑器, 在Linux的终端中输入; `vi filePath`或者`vim filePath`即可使用vi或vim编辑器打开对应的文本文件
- vi和vim它们都是多模式编辑器，不同的是vim是vi的升级版本，它不仅兼容vi的所有指令，而且还有一些新的特性在里面。vim的这些优势主要体现在以下几个方面：
  - 多级撤消, 在vi里，按 u只能撤消上次命令，而在vim里可以无限制的撤消
  - 易用性, vi只能运行于unix中，而vim可以运行于unix,windows ,mac等多个操作平台。
  - 语法加亮, vim可以用不同的颜色来加亮你的代码。
  - 可视化操作
  - 对vi的完全兼容
  - vi和vim都是Linux中的编辑器，不同的是vim比较高级，可以视为vi的升级版本。vi使用于文本编辑，但是vim更适用于coding。

### 5.1 vim使用时三种模式

![](%E7%AC%AC06%E7%AB%A0%20Linux%E7%B3%BB%E7%BB%9F%E6%A6%82%E8%BF%B0%E5%92%8C%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80.assets/vim%E7%9A%84%E4%B8%89%E7%A7%8D%E6%A8%A1%E5%BC%8F.png)



- 命令模式: 从终端用vim打开文件后, 进入的就是这个模式, 
  - 该模式主要用来切换到另外两个模式, 而且因为另外两个模式间不能直接切换, 所以命令模式还要作为另外两个模式间切换的过渡模式.
  - 该模式还可以对文本内容进行删除、剪切、复制、黏贴等操作
- 编辑模式: 就像Windows上的文本编辑器那样使用
- 底行模式: 

### 5.2 各个模式下的命令

#### 5.2.1 命令模式

- ![](%E7%AC%AC06%E7%AB%A0%20Linux%E7%B3%BB%E7%BB%9F%E6%A6%82%E8%BF%B0%E5%92%8C%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80.assets/%E5%91%BD%E4%BB%A4%E6%A8%A1%E5%BC%8F.png)

##### 5.2.1.1 切换到编辑模式的命令

| 命令                                  | 功能                                                         |
| ------------------------------------- | ------------------------------------------------------------ |
| `i`(在命令模式下直接点击这个按键就行) | 从命令模式进入编辑模式, 并且光标位置不变                     |
| `a`(在命令模式下直接点击这个按键就行) | 从命令模式进入编辑模式, 并且光标位置向后移动一位             |
| `o`(在命令模式下直接点击这个按键就行) | 从命令模式进入编辑模式, 并且在光标所在行下插入一行空白行, 将光标移动到空白行的行首 |
| `cw`                                  | 从命令模式进入编辑模式, 并且删除掉光标所在的单词(对单词的识别支持不好, 不建议使用) |
| `cc`                                  | 从命令模式进入编辑模式, 并且清空光标所在行的内容, 然后将光标放在行首 |
| `c$`                                  | 从命令模式进入编辑模式, 并且删除光标所在字符到本行行尾的所有字符, 然后将光标放在行尾 |

##### 5.2.1.2 文本操作的命令

###### 5.2.1.2.1 删除字符的命令

| 命令  | 功能                                                         |
| ----- | ------------------------------------------------------------ |
| `x`   | 删除光标所在的字符                                           |
| `dw`  | 删除光标所在的字符所属的单词(对单词的识别支持不好, **不建议使用**) |
| `3dw` | 删除光标所在的字符所属的单词和之后的两个字符(对单词的识别支持不好, **不建议使用**) |

###### 5.2.1.2.2 替换字符的命令

| 命令                                | 功能                           |
| ----------------------------------- | ------------------------------ |
| `r`(点击这个按键后, 再输入其它字符) | 替换光标所在的字符为另一个字符 |

###### 5.2.1.2.2 复制剪切黏贴

| 命令   | 功能                                                         |
| ------ | ------------------------------------------------------------ |
| `yw`   | 复制光标所在单词和一个空格到剪贴板中(对单词的识别支持不好, **不建议使用**) |
| `yy`   | 复制光标所在行到剪贴板中                                     |
| `6yy`  | 复制包括光标所在行和之后的(5 - 1 = 4)行共`6`行内容到剪贴板中 |
| `dd`   | 剪切光标所在行到到剪贴板中                                   |
| `5dd`  | 剪切光标所在行和之后的(5 - 1 = 4)行共`5`行内容到到剪贴板中   |
| `10dd` | 剪切光标所在行和之后的(10 -1 = 9)行共`10`行内容到到剪贴板中  |
| `p`    | 在光标所在行之下插入新的一行, 并将剪贴板中的内容复制到新插入的行中 |

###### 5.2.1.2.3 撤销和取消撤销

| 命令      | 功能     |
| --------- | -------- |
| `u`       | 撤销     |
| `ctrl+ r` | 取消撤销 |

##### 5.2.1.3 切换到底行模式

| 命令 | 功能                                                  |
| :--: | ----------------------------------------------------- |
| `:`  | 在命令模式下, 输入字符`:`即可从命令模式切换到底行模式 |

#### 5.2.2 编辑模式

- 编辑模式下输入的字符会插入到光标所在位置之前
- ![](%E7%AC%AC06%E7%AB%A0%20Linux%E7%B3%BB%E7%BB%9F%E6%A6%82%E8%BF%B0%E5%92%8C%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80.assets/%E7%BC%96%E8%BE%91%E6%A8%A1%E5%BC%8F.png)

##### 5.2.2.1 切换到命令模式

| 命令  | 功能                                                         |
| ----- | ------------------------------------------------------------ |
| `ESC` | 在编辑模式下, 点击键盘上的`ESC`按键即可从编辑模式切换到命令模式 |

### 5.3 底行模式

![](%E7%AC%AC06%E7%AB%A0%20Linux%E7%B3%BB%E7%BB%9F%E6%A6%82%E8%BF%B0%E5%92%8C%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80.assets/%E5%BA%95%E8%A1%8C%E6%A8%A1%E5%BC%8F.png)

- ==注意: 底行模式下的命令在输入后还需要点击`Enter`键后才会起作用==

#### 5.3.1 切换到命令模式

| 命令    | 功能                                                         |
| ------- | ------------------------------------------------------------ |
| `Enter` | 在底行模式下, 点击键盘上的`Enter`键即可从底行模式切换到命令模式 |

#### 5.3.2 退出vim

| 命令        | 功能                            |
| ----------- | ------------------------------- |
| `:wq`[^注2] | 保存编辑内容后退出vim           |
| `:X`        | 保存编辑内容后退出vim           |
| `:q!`       | 强制退出vim(**不保存编辑内容**) |

#### 5.3.3 保存编辑内容

| 命令           | 功能                                                         |
| -------------- | ------------------------------------------------------------ |
| :w             | 保存编辑内容                                                 |
| :w newFilePath | 将当前文件的内容保存到newFilePath表示的新文件中, **(vim编辑的还是当前文件)** |

**如果保存文件或保存文件退出vim时, 出现异常==E45：“readonly” option is set(add ! to override)==**, 导致保存文件失败而无法退出vim, 可以在底行模式下输入命令`:set noreadonly`, 那么本文件就可以正常保存了.

#### 5.3.4 复制移动

| 命令         | 功能                              |
| ------------ | --------------------------------- |
| `:1,5 co 9`  | 将行1到行5的内容**复制到**行9之后 |
| `: 1,5 mo 9` | 将行1到行5的内容**移动到**行9之后 |

#### 5.3.5 替换字符串

| 命令           | 功能                             |
| -------------- | -------------------------------- |
| `:%s /aaa/sss` | 将本文件中的所有`aaa`替换为`sss` |

#### 5.3.6 查找字符串

| 命令    | 功能          |
| ------- | ------------- |
| `:/aaa` | 向下查找`aaa` |
| `:?aaa` | 向上查找`aaa` |

#### 5.3.7 显示和取消行号

| 命令        |                |
| ----------- | -------------- |
| `:set nu`   | 显示行号       |
| `:set nonu` | 取消行号的显示 |

#### 5.3.8 Tab与空格

#####  5.3.8.1 Tab替换为4个空格

```sh
:set ts=4
:set expandtab
:%retab!
```

##### 5.3.8.2 4个空格替换为一个Tab

```sh
:set ts=4
:set noexpandtab
:%retab!
```



### 5.4 其它

#### 5.4.1 vim的使用教程

在终端里输入`vimtutor`命令可以进入vim的使用教程

#### 5.4.2 vim的简单配置

**在终端输入`vim ~/.vimrc`打开当前用户主目录下的`.vimrc`文件**

##### 5.4.2.1 设置vim默认显示行号

- ```shell
  set nu
  ```

##### 5.4.2.2 设置tab缩进4个字符

```sh
set ts=4
set expandtab
set autoindent
```



